<!-- Auto-generated by Codex CLI. Review and customize as needed. -->
# Flux UI Docs Skill Specification

Validation + usage spec for `fluxui-docs` (offline Flux UI documentation).

---

## Core CLI Contract (MUST)

These are the non-negotiable requirements for AI-agent-safe CLI skills:

### 1. No-Hang Guarantee
- `--help` must complete in <2 seconds
- `--help` must never prompt for input
- Unknown commands must complete quickly

### 2. Unknown Command Contract
- `skill __nope__` exits non-zero with human error
- `skill __nope__ --json` exits non-zero with valid JSON to stderr:
  ```json
  {"error": "Unknown command: __nope__", "valid_commands": ["search", "show", ...]}
  ```

### 3. Lenient Parsing
- `skill __nope__ --json --some-flag=1` must NOT fail with Symfony "option does not exist"
- Requires `ignoreValidationErrors()` in `DefaultCommand::configure()`

### 4. JSON Purity
- When `--json` is present, no ANSI escape codes in output
- Success data goes to stdout, errors go to stderr

### 5. Exit Codes
- 0 = success (including empty results)
- Non-zero = failure

---

## Commands

From `DefaultCommand.php`. All commands support `--json` when listed below.

### docs
List available documentation items.

```
fluxui-docs docs [--category=components|layouts|guides] [--json]
```

### search
Fuzzy search documentation by name/description.

```
fluxui-docs search <query> [--limit=N] [--json]
```

### show
Show full documentation for an item.

```
fluxui-docs show <name> [--section=NAME] [--json]
```

### usages
Show where a component is used in examples.

```
fluxui-docs usages <component> [--json]
```

### discover
List undocumented components found in examples.

```
fluxui-docs discover [--json]
```

### update
Scrape and refresh docs data (maintenance).

```
fluxui-docs update [--item=NAME] [--category=components|layouts|guides] [--delay=MS] [--dry-run]
```

### build
Rebuild artifacts (maintenance).

```
fluxui-docs build [--no-install]
```

---

## File Structure

- `SKILL.md` - skill description + usage
- `SPEC.md` - this spec
- `SETUP.md` - install instructions
- `README.md` - quick-start
- `ANALYTICS.md` - analytics format + opt-out
- `install` - installer script
- `analytics.jsonl` - local analytics (gitignored)
- `data/`
  - `components/` - component docs
  - `layouts/` - layout docs
  - `guides/` - guide docs
  - `index.json` - search index
  - `usages.json` - usage index for `usages`/`discover`
- `src/app/Commands/DefaultCommand.php` - router + help text

---

## Skill-Specific Details

- Offline-only: docs are read from `data/`, no network required for read commands.
- Pro components: JSON may include `"pro": true` and UI badges `[Pro]`; access requires Flux UI Pro license.
- Sectioned docs: `show --section=...` returns a subsection when available.
- JSON contract: `--json` should emit clean JSON without ANSI codes; errors to stderr.
